name: ðŸŒ» SpiderNet GiftWrap Auto-Sync

on:
  release:
    types: [published]      # Trigger when a Release is published
  push:
    paths:
      - "spidernet_secure_*.zip"   # Trigger when ZIP uploaded in repo root

jobs:
  giftwrap:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      # ðŸ”¹ Case 1: Release ZIP
      - name: Download release asset
        if: github.event_name == 'release'
        uses: dsaltares/fetch-gh-release-asset@master
        with:
          repo: ${{ github.repository }}
          version: latest
          file: spidernet_secure_v2.zip
          token: ${{ secrets.GITHUB_TOKEN }}

      # ðŸ”¹ Case 2: Root ZIP (already pushed by user)
      - name: Extract root ZIPs
        if: github.event_name == 'push'
        run: |
          for z in spidernet_secure_*.zip; do
            if [ -f "$z" ]; then
              echo "ðŸ“¦ Extracting $z ..."
              unzip -o "$z" -d .
              rm "$z"
            fi
          done

      # ðŸ”¹ Common Commit & Push
      - name: Commit & Push
        run: |
          git config user.name "spidernet-bot"
          git config user.email "bot@sattvamusk.com"
          git add .
          git commit -m "ðŸŒ» GiftWrap Auto-Sync from ZIP" || echo "No changes to commit"
          git push origin main
name: ðŸŒ» Root ZIP Auto-Sync

on:
  push:
    paths:
      - "spidernet_secure_*.zip"   # any ZIP dropped in repo root

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
name: ðŸŒ» Release Auto-Sync

on:
  release:
    types: [published]   # triggers whenever you publish a release

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Download release asset
        uses: dsaltares/fetch-gh-release-asset@master
        with:
          repo: ${{ github.repository }}
          version: latest
          file: spidernet_secure_v2.zip
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Extract and sync
        run: |
          unzip -o spidernet_secure_v2.zip -d .
          rm spidernet_secure_v2.zip
          git config user.name "spidernet-bot"
          git config user.email "bot@sattvamusk.com"
          git add .
          git commit -m "ðŸŒ» Auto-sync from Release ZIP" || echo "No changes to commit"
          git push origin main
Auto-Sync from Release ZIP
